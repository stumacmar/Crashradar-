<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>CrashRadar ERROR DIAGNOSTIC</title>
  <style>
    body { background:#0d0f18; color:#fff; font-family: monospace; padding:20px; }
    h1 { font-size: 26px; margin-bottom:10px; }
    .log { white-space: pre-wrap; background:#1b1e2b; padding:15px; border-radius:8px; }
    .ok { color:#1ec28b; }
    .err { color:#ff6070; }
  </style>
</head>

<body>

<h1>CrashRadar MODULE DIAGNOSTIC</h1>
<p>This tool checks every JS file, loads it, and prints all errors.</p>

<div id="output" class="log">Running diagnostics…</div>

<script>
async function testModule(path) {
  const out = document.getElementById("output");

  out.innerHTML += "\nChecking: " + path + "\n";

  try {
    await import(path + "?t=" + Date.now());
    out.innerHTML += "  ✔ OK: Loaded successfully\n";
  } catch (err) {
    out.innerHTML += "  ✘ ERROR:\n";
    out.innerHTML += "    " + (err.message || err.toString()) + "\n";
    if (err.stack) out.innerHTML += "    STACK: " + err.stack + "\n";
  }
  out.innerHTML += "----------------------------------------\n";
}

async function runDiagnostics() {
  const out = document.getElementById("output");
  out.innerHTML = "";

  const files = [
    "/js/config.js",
    "/js/dataService.js",
    "/js/historyService.js",
    "/js/scoring.js",
    "/js/uiGauge.js",
    "/js/uiIndicators.js",
    "/js/uiCharts.js",
    "/js/uiAudit.js",
    "/js/exports.js",
    "/js/app.js",
    "/data/fred_cache.json"
  ];

  for (const f of files) {
    await testModule(f);
  }

  out.innerHTML += "\nDONE.\n";
}

runDiagnostics();
</script>

</body>
</html>
